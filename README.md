# 六子棋大作业

本项目是山东大学计算机导论课程的一次大作业，实现了一个简化规则的六子棋游戏。玩家可以在图形界面下通过鼠标进行对弈，也可以与电脑进行人机对战。本仓库使用纯 C 语言编写，利用 SDL2 简单地绘制棋盘并处理鼠标事件，同时提供了局面保存和回放功能。

## 功能概述

- **六子棋对弈**：支持双人对战与人机对战。胜负判断沿用五子棋逻辑，只是将连接数改为六子。
- **图形化界面**：使用 SDL2 绘制棋盘和棋子，玩家通过鼠标点击落子，支持开始界面、结束界面、分数板等简单界面。
- **人机模式**：内置两档难度，`简单模式` 电脑随机落子，`困难模式` 会尝试阻挡玩家即将连成六子，同时寻找自己的机会。
- **记录与回放**：对每一局对弈的落子过程进行记录，并以 JSON 格式保存在 `data/records.json` 中。可以从记录中选择回放，重现游戏过程。
- **悔棋 + 计时器**：对弈过程中支持悔棋（按 `U` 或 `Ctrl+Z`），并会统计本局悔棋次数；右上角会显示本局用时（mm:ss）。
- **工程化结构**：源代码按照功能拆分，头文件与实现文件分离，可通过 `Makefile` 编译生成可执行程序。

## 编译说明

本项目依赖 [SDL2](https://www.libsdl.org/) 库，编译前请确保系统已经安装好 SDL2 头文件和开发库。以 Linux 环境为例，可以使用以下命令安装依赖：

```bash
sudo apt-get install libsdl2-dev
```

安装完毕后，在项目根目录运行以下命令编译程序：

```bash
make
```

编译完成后，会生成一个名为 `six` 的可执行文件。

## 运行与使用

运行程序后，会出现主菜单，可以通过键盘选择模式：

1. **双人模式**：两位玩家轮流在棋盘上落子，谁先连成六子谁获胜。
2. **人机模式**：玩家先行，电脑采用简易策略落子，支持简易和困难两种难度。
3. **回放模式**：读取历史对局记录，逐步在界面上回放落子过程。可在 `data/records.json` 中保存多局记录。
4. **退出**：关闭程序。

在对弈界面中，通过鼠标点击棋盘交叉点完成落子；程序会自动判断是否越界或重复落子。如果游戏结束，可以按任意键返回主菜单。

回放模式里除了回放之外，也支持对记录做清理：

- 输入 `d N` 删除第 N 条记录
- 输入 `a` 清空所有记录

## 自定义

* 变量和函数命名采用较为直观的风格，方便阅读和理解，也保留了作者个人的习惯，不追求极致的规范。
* AI 部分只是简单实现，如有兴趣可以在 `src/ai.c` 中改进电脑落子的评估逻辑。
* `data/records.json` 用于存储对局信息，格式较为简单，如需更丰富的统计或查询可以自行扩展。
* 菜单背景图在 `image/menu_bg.bmp`：SDL2 原生只支持 `BMP` 加载（`SDL_LoadBMP`），想换背景就把这张 bmp 换成你喜欢的即可。

## 注意事项

* 当前实现仅在 Linux 和 Windows 上测试过，如在其他平台编译运行可能需要调整 SDL 初始化参数。
* 如果运行时出现窗口无法创建或渲染失败，请检查 SDL 库是否正确安装。
* 请勿将记录文件删除，否则回放功能将失效；程序会在无法读取记录时自动创建新的 `records.json` 文件。


### 2025-12-18 小更新
- 修复：点“第 N 轮”进入回放后画面不更新（回放补了 SDL_RenderPresent）。
- 提示：如果你之前直接双击 six.exe 测试过，记得重新 `make` 生成新的 exe。
